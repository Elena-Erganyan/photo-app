(this["webpackJsonpphoto-app"]=this["webpackJsonpphoto-app"]||[]).push([[0],{27:function(e,t,a){e.exports=a.p+"static/media/preloader.55df549a.svg"},29:function(e,t,a){e.exports=a(67)},34:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(11),r=a.n(c);a(34),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(7),i=a(9),m=a(1),u=a.n(m),l=a(5),p=a(2),d=a(3),h=a(25),f=a.n(h).a.create({baseURL:"https://boiling-refuge-66454.herokuapp.com/images/"}),E=function(){return f.get()},v=function(e){return f.get("".concat(e))},_=function(e,t,a){return f.post("".concat(e,"/comments"),{name:t,comment:a})},O={photos:[],photoData:{},isModalActive:!1,isFetching:!1},g=function(e,t,a,n){return{type:"SET_COMMENT",payload:{id:e,text:t,date:a,userName:n}}},b=function(e){return{type:"TOGGLE_IS_MODAL_ACTIVE",isModalActive:e}},N=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PHOTOS":return Object(d.a)(Object(d.a)({},e),{},{photos:Object(p.a)(t.photos)});case"SET_PHOTO_DATA":return Object(d.a)(Object(d.a)({},e),{},{photoData:Object(d.a)({},t.photoData)});case"SET_COMMENT":return Object(d.a)(Object(d.a)({},e),{},{photoData:Object(d.a)(Object(d.a)({},e.photoData),{},{comments:[].concat(Object(p.a)(e.photoData.comments),[Object(d.a)({},t.payload)])})});case"TOGGLE_IS_MODAL_ACTIVE":return Object(d.a)(Object(d.a)({},e),{},{isModalActive:t.isModalActive});case"TOGGLE_IS_FETCHING":return Object(d.a)(Object(d.a)({},e),{},{isFetching:t.isFetching});default:return e}},A=a(26),T=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c,j=Object(i.d)(D,T(Object(i.a)(A.a))),M=(a(59),a(60),function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("div",{className:"footer__text"},"\xa9 2020"))}),y=(a(61),a(62),function(e){return o.a.createElement("div",{className:"gallery__item"},o.a.createElement("img",{className:"gallery__photo",onClick:function(){e.requestPhotoData(e.photoId)},src:e.photoUrl,alt:"photo_".concat(e.id)}))}),S=Object(s.b)(null,(function(e){return{requestPhotoData:function(t){e(function(e){return function(){var t=Object(l.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:200===(n=t.sent).status?(a({type:"SET_PHOTO_DATA",photoData:n.data}),a(b(!0))):alert("Some error ocurred: ".concat(n.status,": ").concat(n.statusText));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){return o.a.createElement(y,{photoId:e.id,photoUrl:e.photoUrl,requestPhotoData:e.requestPhotoData})})),w=function(e){var t=e.photos.map((function(t){return o.a.createElement(S,{key:t.id,photoUrl:t.url,id:t.id,isModalActive:e.isModalActive})}));return o.a.createElement("div",{className:"gallery"},t)},I=a(27),x=a.n(I),C=function(){return o.a.createElement("div",{className:"preloader"},o.a.createElement("img",{src:x.a,alt:"Loading..."}))},F=Object(s.b)((function(e){return{photos:e.photos,isFetching:e.isFetching}}),(function(e){return{requestPhotos:function(){e(function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(N(!0)),e.next=3,E();case 3:200===(a=e.sent).status?(t(N(!1)),t({type:"SET_PHOTOS",photos:a.data})):alert("Some error ocurred: ".concat(a.status,": ").concat(a.statusText));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){return Object(n.useEffect)((function(){e.requestPhotos()}),[]),o.a.createElement(o.a.Fragment,null,e.isFetching?o.a.createElement(C,null):null,o.a.createElement(w,{photos:e.photos,isModalActive:e.isModalActive}))})),k=(a(63),a(64),function(e){var t=e.date,a=new Date(t).toLocaleDateString("en-GB",{year:"numeric",month:"numeric",day:"numeric"}).replace(/\//g,".");return o.a.createElement("div",{className:"comment"},o.a.createElement("div",{className:"comment__date"},a),e.userName&&o.a.createElement("div",{className:"comment__userName"},e.userName),o.a.createElement("div",{className:"comment__text"},e.text))}),P=(a(65),function(e){var t=e.comments.map((function(e){return o.a.createElement(k,{key:e.id,text:e.text,date:e.date,userName:e.userName})}));return o.a.createElement("div",{className:"comments"},t)}),G=(a(66),a(28)),L=function(e){var t=Object(G.a)(),a=t.register,n=t.handleSubmit,c=t.errors;return o.a.createElement("form",{onSubmit:n((function(t,a){var n;if(e.comments.length){var o=e.comments.length-1,c=e.comments[o].id;n=++c}else n=1;e.postComment(e.photoId,t.name,t.comment,n,Date.now()),a.target.reset()})),className:"commentsForm"},o.a.createElement("input",{className:"commentsForm__name",name:"name",placeholder:"Your name",ref:a({required:!0})}),c.name&&o.a.createElement("div",{className:"error"},"The name is required"),o.a.createElement("input",{className:"commentsForm__comment",name:"comment",placeholder:"Your comment",ref:a({required:!0})}),c.comment&&o.a.createElement("div",{className:"error"},"The comment is required"),o.a.createElement("button",{className:"commentsForm__btn btn",type:"submit"},"Leave your comment"))},q=function(e){return o.a.createElement("div",{className:"overlay"},o.a.createElement("div",{className:"modal"},o.a.createElement("div",{className:"modal__wrapper"},o.a.createElement("img",{className:"modal__photo",src:e.photoData.url,alt:"photo_".concat(e.photoData.id)}),o.a.createElement("button",{className:"closeBtn",onClick:function(){e.toggleIsModalActive(!1)}},"Close"),e.photoData.comments.length>0?o.a.createElement(P,{comments:e.photoData.comments}):o.a.createElement("div",{className:"comments"},"No comments yet..."),o.a.createElement(L,{postComment:e.postComment,photoId:e.photoData.id,comments:e.photoData.comments}))))},H=Object(s.b)((function(e){return{photoData:e.photoData}}),(function(e){return{toggleIsModalActive:function(t){e(b(t))},postComment:function(t,a,n,o,c){e(function(e,t,a,n,o){return function(){var c=Object(l.a)(u.a.mark((function c(r){var s;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,_(e,t,a,n,o);case 2:204===(s=c.sent).status?r(g(n,a,o,t)):alert("Some error ocurred: ".concat(s.status,": ").concat(s.statusText));case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(t,a,n,o,c))}}}))((function(e){return o.a.createElement(q,{toggleIsModalActive:e.toggleIsModalActive,photoData:e.photoData,postComment:e.postComment})})),U=function(e){return o.a.createElement("div",{className:"App"},o.a.createElement("div",null,o.a.createElement("h1",null,"Photo App"),o.a.createElement(F,{isModalActive:e.isModalActive})),o.a.createElement(M,null),e.isModalActive&&o.a.createElement(H,null))},B=Object(s.b)((function(e){return{isModalActive:e.isModalActive}}))((function(e){return o.a.createElement(U,{isModalActive:e.isModalActive})}));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,{store:j},o.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.1f636ecb.chunk.js.map